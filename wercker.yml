box:
  id: cmwn/front-node:6-wheezy
build:
  steps:
    - script:
      name: Install packages
      code: |
       if [ -f "$WERCKER_CACHE_DIR/nm_cache.tar" ]; then
          debug "Extracting npm tar"
          tar xf $WERCKER_CACHE_DIR/nm_cache.tar
       fi
       npm prune && npm install && tar cf $WERCKER_CACHE_DIR/nm_cache.tar node_modules
    - script:
      name: +1 dump step of dumbness with keen
      code: npm rebuild node-sass
    - script:
      name: Linter
      code: gulp lint
    - script:
      name: Build packages
      code: gulp build --production
  after-steps:
    - slack-notifier:
      url: $SLACK_URL
